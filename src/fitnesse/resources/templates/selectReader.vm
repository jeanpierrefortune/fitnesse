!-
<script>
 document.addEventListener('DOMContentLoaded', (event) => {
  // Check if there's feedback in localStorage
  const feedback = localStorage.getItem('feedback');
  if (feedback) {
   showFeedback('success', feedback);
   localStorage.removeItem('feedback');
  }
 });

 function selectReader() {
  const selectedReader = document.querySelector('input[name="reader"]:checked');
  if (!selectedReader) {
   alert('Please select a reader.');
   return;
  }
  const readerName = selectedReader.value;
  fetch(`/OpenSam.SetReader?responder=test&readerName=` + readerName)
   .then(response => {
    if (response.ok) {
     return response.text(); // Assuming response is HTML
    } else {
     throw new Error('Network response was not ok');
    }
   })
   .then(html => {
    // Store feedback in localStorage and reload the page
    localStorage.setItem('feedback', 'Reader selected successfully!');
    window.location.reload();
   })
   .catch(error => {
    console.error('Error:', error);
    showFeedback('error', 'An error occurred while selecting the reader.');
   });
 }

 function showFeedback(type, message) {
  const feedbackContainer = document.getElementById('feedbackContainer');
  feedbackContainer.innerHTML = message;
  feedbackContainer.className = type === 'error' ? 'feedback-container error' : 'feedback-container';
  setTimeout(() => { feedbackContainer.innerHTML = ''; }, 1500); // Hide after 1.5 seconds
 }
</script>
<div class="container">
 <h3>Available PC/SC Readers</h3>
 #if($terminals.isEmpty())
  <div class="alert">No card terminals found.</div>
 #else
  <form onsubmit="event.preventDefault(); selectReader();">
   #foreach($terminal in $terminals)
    <div class="form-check">
     <input type="radio" id="reader${foreach.index}" name="reader" value="${terminal.getName()}">
     <label class="form-check-label" for="reader${foreach.index}">${terminal.getName()}</label>
    </div>
   #end
   <div style="display: flex; align-items: center;">
    <button type="submit" class="btn">Select Reader</button>
    <div id="feedbackContainer" class="feedback-container"></div>
   </div>
  </form>
 #end
-!
!include -seamless ActiveReader
!-
 <div id="resultContainer"></div>
</div>
-!
